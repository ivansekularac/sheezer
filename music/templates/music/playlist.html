{% extends 'layout.html' %}

{% block title %}
<title>Playlist</title>
{% endblock %}

{% block content %}

<div class="container-fluid">
    <audio id="audio-player" preload="auto">
      <source src="" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <h1>Playlist</h1>

    {% if data|length > 0 %}
        <table id="datatable" class="table table-hover">
            <thead>
                <th>Preview</th>
                <th>Artist</th>
                <th>Song</th>
                <th>Album</th>
                <th>Duration</th>
                <th>Popularity</th>
                <th></th>
            </thead>
            <tbody>
                {% for song in data %}

                <tr>
                    <td>
                      <img src="{{ song.album.cover_small }}" height="35">
                      <span class="btn btn-primary play-button" data-url="{{ song.preview }}"><i class="fas fa-play-circle"></i></span>
                    </td>
                    <td>{{ song.artist.name }}</td>
                    <td>{{ song.title_short }}</td>
                    <td>{{ song.album.title }}</td>
                    <td>{{ song.duration }}</td>
                    <td>{{ song.rank }}</td>
                    <td class="ellipsis">Remove</td>
                </tr>

                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No tracks in found</p>
    {% endif %}

</div>

{% endblock %}
